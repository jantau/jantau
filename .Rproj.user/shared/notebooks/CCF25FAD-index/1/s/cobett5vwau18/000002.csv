"0","# Find all-time highs"
"0","for (i in 1:nrow(nasdaq)) {"
"0","  if (nasdaq[i, ""adjusted""] < max(nasdaq[1:i, ""adjusted""])) {"
"0","    nasdaq[i, ""ath""] <- 0"
"0","  } else {"
"0","    nasdaq[i, ""ath""] <- 1"
"0","  }"
"0","}"
"0",""
"0","nasdaq_ath <- nasdaq %>% filter(ath == 1) %>%"
"0","  mutate(days = date - lag(date))"
"0",""
"0","# Find last lows"
"0","for (i in 1:nrow(nasdaq)) {"
"0","  if (nasdaq[i, ""adjusted""] > min(nasdaq[i:last(nrow(nasdaq)), ""adjusted""])) {"
"0","    nasdaq[i, ""last_low""] <- 0"
"0","  } else {"
"0","    nasdaq[i, ""last_low""] <- 1"
"0","  }"
"0","}"
"0",""
"0","nasdaq_lastlow <- nasdaq %>% filter(last_low == 1 & ath == 1) %>%"
"0","  mutate(days = date - lag(date))"
