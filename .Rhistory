time_trend=trends$interest_over_time
ggplot(data=time_trend, aes(x=date, y=hits, group=keyword, col=keyword)) +
geom_line() +
xlab('Time') +
ylab('Relative Interest') +
theme_bw()+
theme(legend.title = element_blank(),legend.position="bottom",legend.text=element_text(size=12)) +
ggtitle("Google Search Volume")
#define the keywords
keywords=c("doge")
trends = gtrends(keywords, gprop =channel,geo=country, time = time )
time_trend=trends$interest_over_time
ggplot(data=time_trend, aes(x=date, y=hits, group=keyword, col=keyword)) +
geom_line() +
xlab('Time') +
ylab('Relative Interest') +
theme_bw()+
theme(legend.title = element_blank(),legend.position="bottom",legend.text=element_text(size=12)) +
ggtitle("Google Search Volume")
#define the keywords
keywords=c("doge", "etf", "tagesgeld")
trends = gtrends(keywords, gprop =channel,geo=country, time = time )
time_trend=trends$interest_over_time
View(time_trend)
ggplot(data=time_trend, aes(x=date, y=hits, group=keyword, col=keyword)) +
geom_line() +
xlab('Time') +
ylab('Relative Interest') +
theme_bw()+
theme(legend.title = element_blank(),legend.position="bottom",legend.text=element_text(size=12)) +
ggtitle("Google Search Volume")
time_trend <- time_trend %>%
mutate(hits = as.numeric(hits))
ggplot(data=time_trend, aes(x=date, y=hits, group=keyword, col=keyword)) +
geom_line() +
xlab('Time') +
ylab('Relative Interest') +
theme_bw()+
theme(legend.title = element_blank(),legend.position="bottom",legend.text=element_text(size=12)) +
ggtitle("Google Search Volume")
#define the keywords
keywords=c("nasdaq", "msci", "s&p 500")
trends = gtrends(keywords, gprop =channel,geo=country, time = time )
time_trend=trends$interest_over_time
ggplot(data=time_trend, aes(x=date, y=hits, group=keyword, col=keyword)) +
geom_line() +
xlab('Time') +
ylab('Relative Interest') +
theme_bw()+
theme(legend.title = element_blank(),legend.position="bottom",legend.text=element_text(size=12)) +
ggtitle("Google Search Volume")
#define the keywords
keywords=c("nasdaq 100", "dax 30", "s&p 500")
trends = gtrends(keywords, gprop =channel,geo=country, time = time )
time_trend=trends$interest_over_time
ggplot(data=time_trend, aes(x=date, y=hits, group=keyword, col=keyword)) +
geom_line() +
xlab('Time') +
ylab('Relative Interest') +
theme_bw()+
theme(legend.title = element_blank(),legend.position="bottom",legend.text=element_text(size=12)) +
ggtitle("Google Search Volume")
region_trend=trends$interest_by_region
View(region_trend)
region_trend <- region_trend %>%
mutate(location = replace(location, location == "Baden-W端rttemberg", "Baden-Wurttemberg")) %>%
mutate(location = paste0(location, ", DE, Germany"))
hcmap(
"countries/de/de-all",
data = region_trend,
value = "hits",
joinBy = c("woe-label", "location"),
name = "Test",
dataLabels = list(enabled = TRUE, format = "{point.name}"),
borderColor = "#FAFAFA",
borderWidth = 0.1,
tooltip = list(
valueDecimals = 2,
valuePrefix = "",
valueSuffix = "Hits"
)
)
hcmap(
"countries/de/de-all",
data = region_trend %>% filter(keyword == "nasdaq 100"),
value = "hits",
joinBy = c("woe-label", "location"),
name = "Test",
dataLabels = list(enabled = TRUE, format = "{point.name}"),
borderColor = "#FAFAFA",
borderWidth = 0.1,
tooltip = list(
valueDecimals = 2,
valuePrefix = "",
valueSuffix = "Hits"
)
)
hcmap(
"countries/de/de-all",
data = region_trend %>% filter(keyword == "dax 30"),
value = "hits",
joinBy = c("woe-label", "location"),
name = "Test",
dataLabels = list(enabled = TRUE, format = "{point.name}"),
borderColor = "#FAFAFA",
borderWidth = 0.1,
tooltip = list(
valueDecimals = 2,
valuePrefix = "",
valueSuffix = "Hits"
)
)
hcmap(
"countries/de/de-all",
data = region_trend %>% filter(keyword == "dax 3"),
value = "hits",
joinBy = c("woe-label", "location"),
name = "Test",
dataLabels = list(enabled = TRUE, format = "{point.name}"),
borderColor = "#FAFAFA",
borderWidth = 0.1,
tooltip = list(
valueDecimals = 2,
valuePrefix = "",
valueSuffix = "Hits"
)
)
hcmap(
"countries/de/de-all",
data = region_trend %>% filter(keyword == "s&p 500"),
value = "hits",
joinBy = c("woe-label", "location"),
name = "Test",
dataLabels = list(enabled = TRUE, format = "{point.name}"),
borderColor = "#FAFAFA",
borderWidth = 0.1,
tooltip = list(
valueDecimals = 2,
valuePrefix = "",
valueSuffix = "Hits"
)
)
hcmap(
"countries/de/de-all",
data = region_trend %>% filter(keyword == "dax 30"),
value = "hits",
joinBy = c("woe-label", "location"),
name = "Test",
dataLabels = list(enabled = TRUE, format = "{point.name}"),
borderColor = "#FAFAFA",
borderWidth = 0.1,
tooltip = list(
valueDecimals = 2,
valuePrefix = "",
valueSuffix = "Hits"
)
)
#define the keywords
keywords=c("nasdaq 100", "dax 30", "s&p 500", "ostsee")
trends = gtrends(keywords, gprop =channel,geo=country, time = time )
time_trend=trends$interest_over_time
head(time_trend)
region_trend=trends$interest_by_region
region_trend <- region_trend %>%
mutate(location = replace(location, location == "Baden-W端rttemberg", "Baden-Wurttemberg")) %>%
mutate(location = paste0(location, ", DE, Germany"))
hcmap(
"countries/de/de-all",
data = region_trend %>% filter(keyword == "ostsee"),
value = "hits",
joinBy = c("woe-label", "location"),
name = "Test",
dataLabels = list(enabled = TRUE, format = "{point.name}"),
borderColor = "#FAFAFA",
borderWidth = 0.1,
tooltip = list(
valueDecimals = 2,
valuePrefix = "",
valueSuffix = " Hits"
)
)
#define the keywords
keywords=c("nasdaq 100", "dax 30", "s&p 500", "ostsee", "anal")
trends = gtrends(keywords, gprop =channel,geo=country, time = time )
time_trend=trends$interest_over_time
region_trend=trends$interest_by_region
region_trend <- region_trend %>%
mutate(location = replace(location, location == "Baden-W端rttemberg", "Baden-Wurttemberg")) %>%
mutate(location = paste0(location, ", DE, Germany"))
hcmap(
"countries/de/de-all",
data = region_trend %>% filter(keyword == "anal"),
value = "hits",
joinBy = c("woe-label", "location"),
name = "Test",
dataLabels = list(enabled = TRUE, format = "{point.name}"),
borderColor = "#FAFAFA",
borderWidth = 0.1,
tooltip = list(
valueDecimals = 2,
valuePrefix = "",
valueSuffix = " Hits"
)
)
ggplot(data=time_trend, aes(x=date, y=hits, group=keyword, col=keyword)) +
geom_line() +
xlab('Time') +
ylab('Relative Interest') +
theme_bw()+
theme(legend.title = element_blank(),legend.position="bottom",legend.text=element_text(size=12)) +
ggtitle("Google Search Volume")
#define the keywords
keywords=c("nasdaq 100", "dax 30", "s&p 500", "ostsee")
trends = gtrends(keywords, gprop =channel,geo=country, time = time )
time_trend=trends$interest_over_time
region_trend=trends$interest_by_region
region_trend <- region_trend %>%
mutate(location = replace(location, location == "Baden-W端rttemberg", "Baden-Wurttemberg")) %>%
mutate(location = paste0(location, ", DE, Germany"))
hcmap(
"countries/de/de-all",
data = region_trend %>% filter(keyword == "ostsee"),
value = "hits",
joinBy = c("woe-label", "location"),
name = "Test",
dataLabels = list(enabled = TRUE, format = "{point.name}"),
borderColor = "#FAFAFA",
borderWidth = 0.1,
tooltip = list(
valueDecimals = 2,
valuePrefix = "",
valueSuffix = " Hits"
)
)
ggplot(data=time_trend, aes(x=date, y=hits, group=keyword, col=keyword)) +
geom_line() +
xlab('Time') +
ylab('Relative Interest') +
theme_bw()+
theme(legend.title = element_blank(),legend.position="bottom",legend.text=element_text(size=12)) +
ggtitle("Google Search Volume")
View(trends)
trends[["interest_by_city"]][["location"]]
trends[["related_queries"]][["value"]]
#define the keywords
keywords=c("nasdaq 100", "dax 30", "s&p 500")
#set the time window
time=("2004-01-01 2021-07-31")
trends = gtrends(keywords, gprop =channel,geo=country, time = time )
time_trend=trends$interest_over_time
ggplot(data=time_trend, aes(x=date, y=hits, group=keyword, col=keyword)) +
geom_line() +
xlab('Time') +
ylab('Relative Interest') +
theme_bw()+
theme(legend.title = element_blank(),legend.position="bottom",legend.text=element_text(size=12)) +
ggtitle("Google Search Volume")
time_trend <- time_trend %>%
mutate(hits = as.numeric(hits))
ggplot(data=time_trend, aes(x=date, y=hits, group=keyword, col=keyword)) +
geom_line() +
xlab('Time') +
ylab('Relative Interest') +
theme_bw()+
theme(legend.title = element_blank(),legend.position="bottom",legend.text=element_text(size=12)) +
ggtitle("Google Search Volume")
#define the keywords
keywords=c("nasdaq 100", "dax 30", "s&p 500", "msci world")
trends = gtrends(keywords, gprop =channel,geo=country, time = time )
time_trend=trends$interest_over_time
time_trend <- time_trend %>%
mutate(hits = as.numeric(hits))
ggplot(data=time_trend, aes(x=date, y=hits, group=keyword, col=keyword)) +
geom_line() +
xlab('Time') +
ylab('Relative Interest') +
theme_bw()+
theme(legend.title = element_blank(),legend.position="bottom",legend.text=element_text(size=12)) +
ggtitle("Google Search Volume")
time_trend=trends$interest_over_time
time_trend <- time_trend %>%
mutate(hits = is.numeric(hits))
ggplot(data=time_trend, aes(x=date, y=hits, group=keyword, col=keyword)) +
geom_line() +
xlab('Time') +
ylab('Relative Interest') +
theme_bw()+
theme(legend.title = element_blank(),legend.position="bottom",legend.text=element_text(size=12)) +
ggtitle("Google Search Volume")
time_trend=trends$interest_over_time
View(time_trend)
time_trend <- time_trend %>%
mutate(hits = as.numeric(gsub("<1", "0", hits, fixed=TRUE)))
View(time_trend)
ggplot(data=time_trend, aes(x=date, y=hits, group=keyword, col=keyword)) +
geom_line() +
xlab('Time') +
ylab('Relative Interest') +
theme_bw()+
theme(legend.title = element_blank(),legend.position="bottom",legend.text=element_text(size=12)) +
ggtitle("Google Search Volume")
#define the keywords
keywords=c("nasdaq 100 etf", "dax 30 etf", "s&p 500 etf", "msci world etf")
trends = gtrends(keywords, gprop =channel,geo=country, time = time )
time_trend=trends$interest_over_time
time_trend <- time_trend %>%
mutate(hits = as.numeric(gsub("<1", "0", hits, fixed=TRUE)))
ggplot(data=time_trend, aes(x=date, y=hits, group=keyword, col=keyword)) +
geom_line() +
xlab('Time') +
ylab('Relative Interest') +
theme_bw()+
theme(legend.title = element_blank(),legend.position="bottom",legend.text=element_text(size=12)) +
ggtitle("Google Search Volume")
#set the time window
time=("2020-01-01 2020-07-31")
trends = gtrends(keywords, gprop =channel,geo=country, time = time )
time_trend=trends$interest_over_time
time_trend <- time_trend %>%
mutate(hits = as.numeric(gsub("<1", "0", hits, fixed=TRUE)))
ggplot(data=time_trend, aes(x=date, y=hits, group=keyword, col=keyword)) +
geom_line() +
xlab('Time') +
ylab('Relative Interest') +
theme_bw()+
theme(legend.title = element_blank(),legend.position="bottom",legend.text=element_text(size=12)) +
ggtitle("Google Search Volume")
#set the time window
time=("2020-02-01 2020-05-31")
trends = gtrends(keywords, gprop =channel,geo=country, time = time )
time_trend=trends$interest_over_time
time_trend <- time_trend %>%
mutate(hits = as.numeric(gsub("<1", "0", hits, fixed=TRUE)))
ggplot(data=time_trend, aes(x=date, y=hits, group=keyword, col=keyword)) +
geom_line() +
xlab('Time') +
ylab('Relative Interest') +
theme_bw()+
theme(legend.title = element_blank(),legend.position="bottom",legend.text=element_text(size=12)) +
ggtitle("Google Search Volume")
ggtrendsMap(keywords = "gamestop", time = "2020-01-01 2021-07-21", save = "gamestop")
# Load in header file
source("/Users/jan/blog/jantau/content/post/header.R")
setwd("/Users/jan/blog/jantau/content/post/2021-08-07-google-trends")
library(gtrendsR)
library(maps)
library(raster)
library(highcharter)
#set the geographic area: DE = Germany
country=c('DE')
#set channels
channel='web'
ggtrendsMap <- function(keywords, time, save) {
trends <-
gtrends(keywords,
gprop = channel,
geo = country,
time = time)
region_trend <- trends$interest_by_region
region_trend <- region_trend %>%
mutate(location = replace(
location,
location == "Baden-W端rttemberg",
"Baden-Wurttemberg"
)) %>%
mutate(location = paste0(location, ", DE, Germany"))
# mapdata <- get_data_from_map(download_map_data("countries/de/de-all"))
hc <- hcmap(
"countries/de/de-all",
data = region_trend,
value = "hits",
joinBy = c("woe-label", "location"),
name = "Test",
dataLabels = list(enabled = TRUE, format = "{point.name}"),
borderColor = "#FAFAFA",
borderWidth = 0.1,
tooltip = list(
valueDecimals = 2,
valuePrefix = "",
valueSuffix = " Hits"
)
)
hc <- hc %>%
hc_title(text = "Google-Suchvolumen 'ETF' 2020 bis 2021") %>%
hc_subtitle(text = "nach Bundesl辰ndern, 100 = Max") %>%
hc_caption(text = "Datenanalyse u. Visualisierung: jantau.com | Daten: trends.google.com")
print(hc)
saveWidget(hc,
file = paste0(save, ".html"),
selfcontained = TRUE)
}
ggtrendsMap(keywords = "gamestop", time = "2020-01-01 2021-07-21", save = "gamestop")
ggtrendsMap <- function(keywords, time, save) {
trends <-
gtrends(keywords,
gprop = channel,
geo = country,
time = time)
region_trend <- trends$interest_by_region
region_trend <- region_trend %>%
mutate(location = replace(
location,
location == "Baden-W端rttemberg",
"Baden-Wurttemberg"
)) %>%
mutate(location = paste0(location, ", DE, Germany"))
# mapdata <- get_data_from_map(download_map_data("countries/de/de-all"))
hc <- hcmap(
"countries/de/de-all",
data = region_trend,
value = "hits",
joinBy = c("woe-label", "location"),
name = "Test",
dataLabels = list(enabled = TRUE, format = "{point.name}"),
borderColor = "#FAFAFA",
borderWidth = 0.1,
tooltip = list(
valueDecimals = 2,
valuePrefix = "",
valueSuffix = " Hits"
)
)
hc <- hc %>%
hc_title(text = "Google-Suchvolumen 'gamestop' 2020 bis 2021") %>%
hc_subtitle(text = "nach Bundesl辰ndern, 100 = Max") %>%
hc_caption(text = "Datenanalyse u. Visualisierung: jantau.com | Daten: trends.google.com")
print(hc)
saveWidget(hc,
file = paste0(save, ".html"),
selfcontained = TRUE)
}
ggtrendsMap(keywords = "gamestop", time = "2020-01-01 2021-07-21", save = "gamestop")
ggtrendsMap <- function(keywords, time, save) {
trends <-
gtrends(keywords,
gprop = channel,
geo = country,
time = time)
region_trend <- trends$interest_by_region
region_trend <- region_trend %>%
mutate(location = replace(
location,
location == "Baden-W端rttemberg",
"Baden-Wurttemberg"
)) %>%
mutate(location = paste0(location, ", DE, Germany"))
# mapdata <- get_data_from_map(download_map_data("countries/de/de-all"))
hc <- hcmap(
"countries/de/de-all",
data = region_trend,
value = "hits",
joinBy = c("woe-label", "location"),
name = "Test",
dataLabels = list(enabled = TRUE, format = "{point.name}"),
borderColor = "#FAFAFA",
borderWidth = 0.1,
tooltip = list(
valueDecimals = 2,
valuePrefix = "",
valueSuffix = " Hits"
)
)
hc <- hc %>%
hc_title(text = "Google-Suchvolumen 'riesterrente' 2020 bis 2021") %>%
hc_subtitle(text = "nach Bundesl辰ndern, 100 = Max") %>%
hc_caption(text = "Datenanalyse u. Visualisierung: jantau.com | Daten: trends.google.com")
print(hc)
saveWidget(hc,
file = paste0(save, ".html"),
selfcontained = TRUE)
}
ggtrendsMap(keywords = "riesterrente", time = "2020-01-01 2021-07-21", save = "riesterrente")
ggtrendsMap <- function(keywords, time, save) {
trends <-
gtrends(keywords,
gprop = channel,
geo = country,
time = time)
region_trend <- trends$interest_by_region
region_trend <- region_trend %>%
mutate(location = replace(
location,
location == "Baden-W端rttemberg",
"Baden-Wurttemberg"
)) %>%
mutate(location = paste0(location, ", DE, Germany"))
# mapdata <- get_data_from_map(download_map_data("countries/de/de-all"))
hc <- hcmap(
"countries/de/de-all",
data = region_trend,
value = "hits",
joinBy = c("woe-label", "location"),
name = "Test",
dataLabels = list(enabled = TRUE, format = "{point.name}"),
borderColor = "#FAFAFA",
borderWidth = 0.1,
tooltip = list(
valueDecimals = 2,
valuePrefix = "",
valueSuffix = " Hits"
)
)
hc <- hc %>%
hc_title(text = "Google-Suchvolumen 'etf' 2020 bis 2021") %>%
hc_subtitle(text = "nach Bundesl辰ndern, 100 = Max") %>%
hc_caption(text = "Datenanalyse u. Visualisierung: jantau.com | Daten: trends.google.com")
print(hc)
saveWidget(hc,
file = paste0(save, ".html"),
selfcontained = TRUE)
}
ggtrendsMap(keywords = "etf", time = "2020-01-01 2021-07-21", save = "etf")
