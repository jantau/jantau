"0","# Find all-time highs"
"0","for (i in 1:nrow(dax)) {"
"0","  if (dax[i, ""adjusted""] < max(dax[1:i, ""adjusted""])) {"
"0","    dax[i, ""ath""] <- 0"
"0","  } else {"
"0","    dax[i, ""ath""] <- 1"
"0","  }"
"0","}"
"0",""
"0","dax_ath <- dax %>% filter(ath == 1) %>%"
"0","  mutate(days = date - lag(date))"
"0",""
"0","# Find last lows"
"0","for (i in 1:nrow(dax)) {"
"0","  if (dax[i, ""adjusted""] > min(dax[i:last(nrow(dax)), ""adjusted""])) {"
"0","    dax[i, ""last_low""] <- 0"
"0","  } else {"
"0","    dax[i, ""last_low""] <- 1"
"0","  }"
"0","}"
"0",""
"0","dax_lastlow <- dax %>% filter(last_low == 1 & ath == 1) %>%"
"0","  mutate(days = date - lag(date))"
