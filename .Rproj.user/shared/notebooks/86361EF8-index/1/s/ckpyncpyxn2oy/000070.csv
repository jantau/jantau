"0","pal <- got(3, option = ""Daenerys"", direction = -1)"
"0",""
"0","ggplot(sp_500_perc_total) +"
"0","  geom_rect("
"0","    aes("
"0","      xmin = as.Date(""2001-03-01""),"
"0","      xmax = as.Date(""2002-10-30""),"
"0","      ymin = -Inf,"
"0","      ymax = Inf"
"0","    ),"
"0","    fill = ""grey"","
"0","    alpha = 0.3"
"0","  ) +"
"0","  geom_rect("
"0","    aes("
"0","      xmin = as.Date(""2007-12-01""),"
"0","      xmax = as.Date(""2009-06-30""),"
"0","      ymin = -Inf,"
"0","      ymax = Inf"
"0","    ),"
"0","    fill = ""grey"","
"0","    alpha = 0.3"
"0","  ) +"
"0","  geom_line(aes(x = date, y = perc, color = symbol),"
"0","            size = 0.5,"
"0","            show.legend = FALSE) +"
"0","  geom_hline(yintercept = 0) +"
"0","  scale_color_manual(values = pal) +"
"0","  scale_x_date("
"0","    date_breaks = ""2 years"","
"0","    date_labels = ""%Y"","
"0","    expand = c(0.1, 0)"
"0","  ) +"
"0","  scale_y_continuous(labels = dollar_format(suffix = "" %"","
"0","                                            prefix = """")) +"
"0","  theme_jantau +"
"0","  labs(title = ""The Lost Decade"", x = """", y = """") +"
"0","  geom_label("
"0","    data = sp_500_perc_total %>% group_by(symbol) %>% slice_tail(),"
"0","    aes("
"0","      x = date,"
"0","      y = perc,"
"0","      label = paste0(symbol, "",\n"", round(perc, 1), "" %"")"
"0","    ),"
"0","    show.legend = FALSE,"
"0","    color = pal,"
"0","    alpha = 0.8"
"0","  ) +"
"0","  geom_label("
"0","    data = sp_500_perc_total %>% group_by(symbol) %>% filter(date == ""2007-10-01""),"
"0","    aes("
"0","      x = date,"
"0","      y = perc,"
"0","      label = paste0(round(perc, 1), "" %"")"
"0","    ),"
"0","    show.legend = FALSE,"
"0","    color = pal,"
"0","    alpha = 0.8"
"0","  )"
