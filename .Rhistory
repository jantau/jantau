str_extract("^/resource/.+2021\d{4}.+") %>%
discard(is.na)
xetra <- xetra_page %>%
read_html() %>%
html_nodes("a") %>%
html_attr("href") %>%
str_extract("^/resource/.+2021\\d{4}.+") %>%
discard(is.na)
for (i in seq(xetra)) {
url <- paste0("https://www.deutsche-boerse-cash-market.com", xetra[i])
destfile <- paste0("X-", str_extract(xetra[i], "2021\d{4}"), ".xlsx")
curl::curl_download(url, destfile)
assign(destfile, read_excel(destfile, col_names = FALSE, skip = 4, sheet = "XTF Exchange Traded Funds"))
}
for (i in seq(xetra)) {
url <- paste0("https://www.deutsche-boerse-cash-market.com", xetra[i])
destfile <- paste0("X-", str_extract(xetra[i], "2021\\d{4}"), ".xlsx")
curl::curl_download(url, destfile)
assign(destfile, read_excel(destfile, col_names = FALSE, skip = 4, sheet = "XTF Exchange Traded Funds"))
}
for (i in seq(xetra)) {
url <- paste0("https://www.deutsche-boerse-cash-market.com", xetra[i])
destfile <- paste0("X-", str_extract(xetra[i], "2021\\d{4}"), ".xlsx")
curl::curl_download(url, destfile)
assign(destfile, read_excel(destfile, col_names = FALSE, skip = 4, sheet = "XTF Exchange Traded Funds"))
for (i in 1:ncol(destfile)) {
if (is.na(destfile[1, i])) {
colnames(destfile)[i] <- destfile[2, i]
} else {
colnames(destfile)[i] <- destfile[1, i]
}
}
destfile <- destfile %>%
filter(!row_number() %in% c(1, 2))
}
destfile
assign(destfile)
objects(destfile)
for (i in seq(xetra)) {
url <- paste0("https://www.deutsche-boerse-cash-market.com", xetra[i])
destfile <- paste0("X-", str_extract(xetra[i], "2021\\d{4}"), ".xlsx")
curl::curl_download(url, destfile)
destfile <- assign(destfile, read_excel(destfile, col_names = FALSE, skip = 4, sheet = "XTF Exchange Traded Funds"))
for (i in 1:ncol(destfile)) {
if (is.na(destfile[1, i])) {
colnames(destfile)[i] <- destfile[2, i]
} else {
colnames(destfile)[i] <- destfile[1, i]
}
}
destfile <- destfile %>%
filter(!row_number() %in% c(1, 2))
}
View(`X-20210131.xlsx`)
View(destfile)
for (i in seq(xetra)) {
url <- paste0("https://www.deutsche-boerse-cash-market.com", xetra[i])
destfile <- paste0("X-", str_extract(xetra[i], "2021\\d{4}"), ".xlsx")
curl::curl_download(url, destfile)
}
tbl <-
list.files(pattern = "*.xlsx")
tbl <-
list.files(pattern = "*.xlsx") %>%
map_df(~read_excel(.))
View(tbl)
tbl <-
list.files(pattern = "*.xlsx") %>%
map_df(~read_excel(., col_names = FALSE, skip = 4, sheet = "XTF Exchange Traded Funds"))
tbl <-
list.files(pattern = "*.xlsx")
get(tbl[1])
assign(tbl[1])
assign(tbl[1], 1)
assign(tbl[1], tbl[1])
assign(tbl[1], tbl[1])
assign(tbl[1], 1)
assign(tbl[1], paste0("X-", str_extract(xetra[1], "2021\\d{4}"), ".xlsx"))
assign(destfile, paste0("X-", str_extract(xetra[1], "2021\\d{4}"), ".xlsx"))
assign(destfile, paste0("X-", str_extract(xetra[1], "2021\\d{4}"), ".xlsx"))
for (i in seq(xetra)) {
url <- paste0("https://www.deutsche-boerse-cash-market.com", xetra[i])
destfile <- paste0("X-", str_extract(xetra[i], "2021\\d{4}"), ".xlsx")
curl::curl_download(url, destfile)
assign(paste0("X-", str_extract(xetra[i], "2021\\d{4}")), read_excel(destfile, col_names = FALSE, skip = 4, sheet = "XTF Exchange Traded Funds"))
# assign(destfile, read_excel(destfile, col_names = FALSE, skip = 4, sheet = "XTF Exchange Traded Funds"))
}
for (i in seq(xetra)) {
url <- paste0("https://www.deutsche-boerse-cash-market.com", xetra[i])
destfile <- paste0("X-", str_extract(xetra[i], "2021\\d{4}"), ".xlsx")
curl::curl_download(url, destfile)
destfile_name <- paste0("X-", str_extract(xetra[i], "2021\\d{4}"))
assign(destfile_name, read_excel(destfile, col_names = FALSE, skip = 4, sheet = "XTF Exchange Traded Funds"))
# assign(destfile, read_excel(destfile, col_names = FALSE, skip = 4, sheet = "XTF Exchange Traded Funds"))
}
assign(destfile_name, paste0("X-", str_extract(xetra[1], "2021\\d{4}"), ".xlsx"))
assign(destfile_name, destfile_name)
assign(destfile_name, destfile_name)
url <- "https://www.deutsche-boerse-cash-market.com/resource/blob/2409978/1b8f858f414d009155646519618092e6/data/20201231-ETF-ETP-Statistic.xlsx"
curl(url)
curl::curl(url)
test <- curl::curl(url)
mget(ls(pattern = "X-2021\\d{4}"))
xetra_list <- mget(ls(pattern = "X-2021\\d{4}"))
View(xetra_list)
xetra_list <- mget(ls(pattern = "^X-2021\\d{4}$"))
View(xetra_list)
for (i in seq(xetra)) {
url <- paste0("https://www.deutsche-boerse-cash-market.com", xetra[i])
destfile <- paste0("X-", str_extract(xetra[i], "2021\\d{4}"), ".xlsx")
curl::curl_download(url, destfile)
destfile_name <- paste0("X-", str_extract(xetra[i], "2021\\d{4}"))
assign(destfile_name, read_excel(destfile, col_names = FALSE, skip = 4, sheet = "XTF Exchange Traded Funds"))
# assign(destfile, read_excel(destfile, col_names = FALSE, skip = 4, sheet = "XTF Exchange Traded Funds"))
}
xetra_list <- mget(ls(pattern = "^X-2021\\d{4}$"))
View(xetra_list)
View(xetra_list)
xetra_list[[1]]
xetra_list[[1]][[1]]
xetra_list[[1]][1]
xetra_list[[1]][1,1]
xetra_list[[1]][,1]
xetra_list[[1]][1,]
colnames(xetra_list)[i]
colnames(xetra_list)[[i]]
colnames(xetra_list)[[1]]
colnames(xetra_list[[1]])
for (i in 1:11) {
if (is.na(xetra_list[[i]][1, ])) {
colnames(xetra_list[[i]]) <- xetra_list[[i]][2, ]
} else {
colnames(xetra_list[[i]]) <- xetra_list[[i]][1, ]
}
}
warnings()
View(xetra_list)
xetra_list[[1]][1,]
xetra_list[[1]][2,]
xetra_list[[1]][2,]
xetra_list[[1]][2,1]
xetra_list <- mget(ls(pattern = "^X-2021\\d{4}$"))
for (i in 1:11) {
if (is.na(xetra_list[[i]][1, i])) {
colnames(xetra_list[[i]]) <- xetra_list[[i]][2, i]
} else {
colnames(xetra_list[[i]]) <- xetra_list[[i]][1, i]
}
}
xetra_list <- mget(ls(pattern = "^X-2021\\d{4}$"))
for (i in 1:11) {
if (is.na(xetra_list[[i]][1, i])) {
colnames(xetra_list[[i]]) <- xetra_list[[i]][2, i]
} else {
colnames(xetra_list[[i]]) <- xetra_list[[i]][1, i]
}
}
map(xetra_list,  row_to_names(row_number = 2))
map(xetra_list, row_to_names, row_number = 2)
xetra_list_2 <- map(xetra_list, row_to_names, row_number = 1)
View(xetra_list_2)
xetra_list <- mget(ls(pattern = "^X-2021\\d{4}$"))
xetra_list_2 <- map(xetra_list, row_to_names, row_number = 1)
View(xetra_list_2)
warnings(2)
xetra_list <- mget(ls(pattern = "^X-2021\\d{4}$"))
View(xetra_list)
xetra_list_3 <- map(xetra_list_2, cbind, xetra_list_2 = xetra_list_2)
xetra_list <- mget(ls(pattern = "^X-2021\\d{4}$"))
xetra_list_2 <- map(xetra_list, row_to_names, row_number = 1)
xetra_list_3 <- map2(xetra_list_2, names, ~cbind(.x, SampleID = .y))
xetra_list_3 <- map2(xetra_list_2, names(xetra_list_2), ~cbind(.x, SampleID = .y))
View(xetra_list_3)
test <- bind_rows(xetra_list_3, .id = "column_label")
View(test)
xetra_list <- mget(ls(pattern = "^X-2021\\d{4}$"))
View(xetra_list)
xetra_list_2 <- map(xetra_list, row_to_names, row_number = 1)
View(xetra_list_2)
xetra_list[[1]]
xetra_list[[1]][[1]]
xetra_list[[1]][[,1]]
xetra_list[[1]][[1,]]
xetra_list[[1]][1,]
# combine first two rows
test <- map2(xetra_list, paste0(xetra_list[[.]][1,], xetra_list[[.]][2,]), ~rbind(.x, .y)
# combine first two rows
test <- map2(xetra_list, paste0(xetra_list[[.]][1,], xetra_list[[.]][2,]), ~rbind(.x, .y))
# combine first two rows
test <- map2(xetra_list, paste0(xetra_list[[.x]][1,], xetra_list[[.x]][2,]), ~rbind(.x, .y))
xetra_list[[.]][1,]
xetra_list[[1]][1,]
xetra_list[1,]
xetra_list[[1,]]
# combine first two rows
test <- map2(xetra_list, paste0(xetra_list[[1]][1,], xetra_list[[1]][2,]), ~rbind(.x, .y))
View(test)
# combine first two rows
test <- map2(xetra_list, paste0(xetra_list[[1]][1,], xetra_list[[1]][2,]), ~rbind(.y, .x))
View(test)
xetra_list[[1]][1,]
xetra_list[[1]][2,]
xetra_list_2 <- map(xetra_list, row_to_names, row_number = 1+2)
View(xetra_list_2)
xetra_list_2 <- map(xetra_list, row_to_names, row_number = 1)
xetra_list[[1]][1,]
xetra_list[[2]][1,]
xetra_list[[1]][2,]
# combine first two rows
test <- map2(xetra_list, paste0(xetra_list[[.y]][1,], xetra_list[[.y]][2,]), ~rbind(.y, .x))
# combine first two rows
test <- map2(xetra_list, paste0(xetra_list[[.x]][1,], xetra_list[[.y]][2,]), ~rbind(.y, .x))
# combine first two rows
test <- map2(xetra_list, paste0(xetra_list[[.]][1,], xetra_list[[.]][2,]), ~rbind(.y, .x))
# combine first two rows
test <- map2(xetra_list, ~paste0(xetra_list[[.]][1,], xetra_list[[.]][2,]), ~rbind(.y, .x))
# combine first two rows
test <- map2(xetra_list, ~paste0(xetra_list[[.x]][1,], xetra_list[[.y]][2,]), ~rbind(.y, .x))
# combine first two rows
test <- map2(xetra_list, ~paste0(xetra_list[[.x]][1,], xetra_list[[.x]][2,]), ~rbind(.y, .x))
test <- map2(xetra_list, ~paste0(xetra_list[[.x]][1,], xetra_list[[.x]][2,]), ~rbind(.y, .z))
test <- map(xetra_list, ~paste0(xetra_list[[.x]][1,], xetra_list[[.x]][2,]))
test <- map2(xetra_list, ~paste0(xetra_list[[.x]][1,], xetra_list[[.x]][2,]))
test <- map2(xetra_list, ~paste0(xetra_list[[.]][1,], xetra_list[[.]][2,]))
test <- map(xetra_list, ~paste0(xetra_list[[.]][1,], xetra_list[[.]][2,]))
test <- map2(xetra_list, ~paste0(xetra_list[[.]][1,], xetra_list[[.]][2,]), ~rbind(.y, .x))
test <- map2(xetra_list, ~paste0(xetra_list[[.x]][1,], xetra_list[[.x]][2,]), ~rbind(.y, .x))
test <- map2(xetra_list, ~paste0(xetra_list[[1:11]][1,], xetra_list[[1:11]][2,]), ~rbind(.y, .x))
# combine first two rows
test <- map2(xetra_list, ~paste0(xetra_list[[.x]][1,], xetra_list[[.x]][2,]), ~rbind(.y, .x))
# combine first two rows
test <- map2(xetra_list, paste0(xetra_list[[.x]][1,], xetra_list[[.x]][2,]), ~rbind(.y, .x))
row_number(xetra_list)
row_number(xetra_list, 1)
test <- map2(xetra_list, ~combine(xetra_list[[.x]][1,], xetra_list[[.x]][2,]), ~rbind(.y, .x))
test <- map(xetra_list, ~combine(xetra_list[[.x]][1,], xetra_list[[.x]][2,]))
test <- map(xetra_list, ~vctrs::vec_c(xetra_list[[.x]][1,], xetra_list[[.x]][2,]))
paste0(xetra_list[[1]][1,], xetra_list[[1]][2,], sep = "-")
paste(xetra_list[[1]][1,], xetra_list[[1]][2,], sep = "-")
paste(xetra_list[[1]][1,], xetra_list[[1]][2,], sep = "_")
test <- map(xetra_list, ~paste(xetra_list[[1]][1,], xetra_list[[1]][2,], sep = "_"))
View(test)
test <- map(xetra_list, ~paste(xetra_list[[1]][1,], xetra_list[[1]][2,], sep = "_"))
View(test)
test[["X-20210131"]]
test <- map(xetra_list, paste(xetra_list[[1]][1,], xetra_list[[1]][2,], sep = "_"))
View(test)
test <- map2(xetra_list, paste(xetra_list[[1]][1,], xetra_list[[1]][2,], sep = "_"), ~rbind(.y, .x))
View(test)
test[["X-20210131"]][["...1"]]
xetra_list[[1]][1,]
xetra_list[[2]][1,]
xetra_list[[2]][2,]
first_row
test <- map2(xetra_list, paste(xetra_list[[1]][1,], xetra_list[[1]][2,], sep = "_"), ~rbind(.y, .x))
test <- map2(xetra_list, paste(xetra_list[1,], xetra_list[2,], sep = "_"), ~rbind(.y, .x))
test <- map2(xetra_list, paste(xetra_list[[1,]], xetra_list[[2,]], sep = "_"), ~rbind(.y, .x))
test <- map2(xetra_list, paste(.x[[1,]], .x[[2,]], sep = "_"), ~rbind(.y, .x))
test <- map2(xetra_list, ~paste(.x[[1,]], .x[[2,]], sep = "_"), ~rbind(.y, .x))
test <- map2(xetra_list, ~paste(.[[1,]], .[[2,]], sep = "_"), ~rbind(.y, .x))
test <- map2(xetra_list, ~paste(.[1,], .[2,], sep = "_"), ~rbind(.y, .x))
test <- map2(xetra_list, ~paste(.x[1,], .x[2,], sep = "_"), ~rbind(.y, .x))
test <- map(xetra_list, ~paste(.x[1,], .x[2,], sep = "_"))
View(test)
test <- map(xetra_list, ~paste(.x[1,], .x[2,], sep = "_"))
View(test)
test[["X-20210131"]]
test <- map2(xetra_list, ~paste(.x[1,], .x[2,], sep = "_"), ~rbind(.y, .x))
test <- map2(xetra_list, ~paste(.x[1,], .x[2,], sep = "_"), ~rbind(.z, .y))
test <- map2(xetra_list, ~paste(.[1,], .[2,], sep = "_"), ~rbind(.z, .y))
test <- map2(xetra_list, ~paste(.[1,], .[2,], sep = "_"), ~rbind(., .))
test <- map2(xetra_list, paste(.[1,], .[2,], sep = "_"), ~rbind(.y, .x))
test <- map2(xetra_list, ~paste(.[1,], .[2,], sep = "_"))
test <- map(xetra_list, ~paste(.[1,], .[2,], sep = "_"))
View(test)
test[["X-20210131"]]
test <- map(xetra_list, ~paste(.[1,], .[2,], sep = "_"), ~rbind(.y, .x))
View(test)
test[["X-20210131"]]
test <- map(xetra_list, ~paste(.[1,], .[2,], sep = "_"), rbind(.y, .x))
View(test)
test <- map2(xetra_list, ~paste(.[1,], .[2,], sep = "_"), ~rbind(.y, .x))
test <- map(xetra_list, ~paste(.[1,], .[2,], sep = "_"))
test2 <- map(xetra_list, names, test)
test2 <- map(xetra_list, set.names, test)
test2 <- map(xetra_list, colnames, test)
test2 <- map(xetra_list, ~colnames(test))
View(test2)
View(xetra_list)
test2 <- map(xetra_list, ~colnames(test[[.x]]))
test2 <- map(xetra_list, ~colnames(test[.x]))
test2 <- map(xetra_list, colnames(test))
View(test)
test <- map2(xetra_list, ~paste(.x[1,], .x[2,], sep = "_"), ~colnames(.x))
test <- map2(xetra_list, ~paste(.x[1,], .x[2,], sep = "_"), ~colnames(.y))
test <- map2(xetra_list, ~paste(.x[1,], .x[2,], sep = "_"), ~colnames(.))
test <- map2(xetra_list, ~paste(.x[1,], .x[2,], sep = "_"), ~colnames(.x))
test <- map2(xetra_list, ~paste(.x[1,], .x[2,], sep = "_"), ~colnames())
test <- map2(xetra_list, ~paste(.x[1,], .x[2,], sep = "_"), colnames)
test <- map(xetra_list, ~paste(.[1,], .[2,], sep = "_"))
View(test)
test2 <- map(xetra_list, ~colnames() <- test)
test2 <- map(xetra_list, ~colnames, test)
View(test2)
test[1]
test2 <- map(xetra_list, ~colnames, test[.x])
View(test2)
test2 <- map(xetra_list, colnames, test[.x])
seq_along(xetra_list[[2]][2,])
seq_along(xetra_list)
# combine first two rows
test <- map2(seq_along(xetra_list), ~paste0(xetra_list[[.x]][1,], xetra_list[[.x]][2,]), ~rbind(.y, .x))
# combine first two rows
test <- map2(seq_along(xetra_list), paste0(xetra_list[[.x]][1,], xetra_list[[.x]][2,]), ~rbind(.y, .x))
test <- map(seq_along(xetra_list), ~paste0(xetra_list[[.x]][1,], xetra_list[[.x]][2,]))
View(test)
test <- map(xetra_list, ~paste(.[1,], .[2,], sep = "_"))
View(test)
map(xetra_list, '[[', 1)
map(xetra_list, '[[', 2)
map(xetra_list, '[', 1)
row.names(xetra_list)
row.names(xetra_list)
test <- map(xetra_list, ~paste(.[1,], .[2,], sep = "_"))
map2(xetra_list, asplit(test, 1), ~ .x %>%
set_names(.y))
map2(xetra_list, test, ~ .x %>%
set_names(.y))
test2 <- map2(xetra_list, test, ~ .x %>%
set_names(.y))
View(test2)
test2 <- map2(xetra_list, test, ~ .x %>%
set_names(.y)) %>% slice(-1)
map(test2, slice, -1)
map(test2, slice, -2)
map(test2, slice, c(-1,-2))
test <- map(xetra_list, ~paste(.[1,], .[2,], sep = "_"), ~ .x %>%
set_names(.y))
View(test)
test <- map(xetra_list, paste(.[1,], .[2,], sep = "_"), ~ .x %>%
set_names(.y))
test <- map(xetra_list, ~paste(.[1,], .[2,], sep = "_"), ~ xetra_list %>%
set_names(.y))
test <- map(xetra_list, ~paste(.[1,], .[2,], sep = "_"),  xetra_list %>%
set_names(.y))
View(test)
xetra_list_names <- map(xetra_list, ~paste(.[1,], .[2,], sep = "_"))
xetra_list_coln <- map2(xetra_list, xetra_list_names, ~ .x %>%
set_names(.y))
View(xetra_list_coln)
xetra_list_clean <- map(xetra_list_coln, slice, c(-1,-2))
View(xetra_list_clean)
View(xetra_list)
xetra_df <- bind_rows(xetra_list_clean, .id = "month")
View(xetra_df)
View(xetra_list_names)
xetra_list_names[["X-20210131"]]
map(xetra_list_names, str_remove, "\\d.+")
xetra_list_names_clean <- map(xetra_list_names, str_remove, "\\d.+")
xetra_list_coln <- map2(xetra_list, xetra_list_names_clean, ~ .x %>%
set_names(.y))
xetra_list_clean <- map(xetra_list_coln, slice, c(-1,-2))
xetra_df <- bind_rows(xetra_list_clean, .id = "Month")
xetra_df <- bind_rows(xetra_list_clean, .id = "Month") %>%
drop_na(`Product Family_NA`)
test <- xetra_df %>%
select(etf_name = 2)
View(test)
test <- xetra_df %>%
select(month = Month,
etf_name = 2,
isin = ISIN_NA,
product_family = `Product Family_NA`,
replication = Replication_NA,
income_treatment = `Income Treatment_NA`,
turnover_in_meur = `Xetra Order Book Turnover in MEUR_`,
aum_in_meur = `AuM_in MEUR`)
test <- xetra_df %>%
select(month = Month,
etf_name = 2,
isin = ISIN_NA,
product_family = `Product Family_NA`,
replication = Replication_NA,
income_treatment = 6,
turnover_in_meur = `Xetra Order Book Turnover in MEUR_`,
aum_in_meur = `AuM_in MEUR`)
test <- xetra_df %>%
select(month = Month,
etf_name = 2,
isin = ISIN_NA,
product_family = `Product Family_NA`,
replication = Replication_NA,
income_treatment = 6,
turnover_in_meur = as.numeric(`Xetra Order Book Turnover in MEUR_`),
aum_in_meur = `AuM_in MEUR`)
test <- xetra_df %>%
select(month = Month,
etf_name = 2,
isin = ISIN_NA,
product_family = `Product Family_NA`,
replication = Replication_NA,
income_treatment = 6,
turnover_in_meur = as.numeric(`Xetra Order Book Turnover in MEUR_`),
aum_in_meur = `AuM_in MEUR`)
test <- xetra_df %>%
select(month = Month,
etf_name = 2,
isin = ISIN_NA,
product_family = `Product Family_NA`,
replication = Replication_NA,
income_treatment = 6,
as.numeric(turnover_in_meur) = `Xetra Order Book Turnover in MEUR_`,
aum_in_meur = `AuM_in MEUR`)
test <- xetra_df %>%
select(month = Month,
etf_name = 2,
isin = ISIN_NA,
product_family = `Product Family_NA`,
replication = Replication_NA,
income_treatment = 6,
turnover_in_meur = `Xetra Order Book Turnover in MEUR_`,
aum_in_meur = `AuM_in MEUR`)
test <- xetra_df %>%
select(month = Month,
etf_name = 2,
isin = ISIN_NA,
product_family = `Product Family_NA`,
replication = Replication_NA,
income_treatment = 6,
turnover_in_meur = `Xetra Order Book Turnover in MEUR_`,
aum_in_meur = `AuM_in MEUR`) %>%
mutate(turnover_in_meur = as.numeric(turnover_in_meur),
aum_in_meur = as.numeric(aum_in_meur))
test <- xetra_df %>%
select(month = Month,
etf_name = 2,
isin = ISIN_NA,
product_family = `Product Family_NA`,
replication = Replication_NA,
income_treatment = 6,
turnover_in_meur = `Xetra Order Book Turnover in MEUR_`,
aum_in_meur = `AuM_in MEUR`) %>%
filter(isin =! "ISIN") %>%
mutate(turnover_in_meur = as.numeric(turnover_in_meur),
aum_in_meur = as.numeric(aum_in_meur))
test <- xetra_df %>%
select(month = Month,
etf_name = 2,
isin = ISIN_NA,
product_family = `Product Family_NA`,
replication = Replication_NA,
income_treatment = 6,
turnover_in_meur = `Xetra Order Book Turnover in MEUR_`,
aum_in_meur = `AuM_in MEUR`) %>%
filter(isin != "ISIN") %>%
mutate(turnover_in_meur = as.numeric(turnover_in_meur),
aum_in_meur = as.numeric(aum_in_meur))
test <- xetra_df %>%
select(month = Month,
etf_name = 2,
isin = ISIN_NA,
product_family = `Product Family_NA`,
replication = Replication_NA,
income_treatment = 6,
turnover_in_meur = `Xetra Order Book Turnover in MEUR_`,
aum_in_meur = `AuM_in MEUR`) %>%
filter(isin != "ISIN") %>%
mutate(turnover_in_meur = as.numeric(turnover_in_meur),
aum_in_meur = as.numeric(aum_in_meur, rm.na = FALSE))
test <- xetra_df %>%
select(month = Month,
etf_name = 2,
isin = ISIN_NA,
product_family = `Product Family_NA`,
replication = Replication_NA,
income_treatment = 6,
turnover_in_meur = `Xetra Order Book Turnover in MEUR_`,
aum_in_meur = `AuM_in MEUR`) %>%
filter(isin != "ISIN") %>%
mutate(turnover_in_meur = as.numeric(turnover_in_meur),
aum_in_meur = as.numeric(aum_in_meur))
xetra_df <- xetra_df %>%
select(month = Month,
etf_name = 2,
isin = ISIN_NA,
product_family = `Product Family_NA`,
replication = Replication_NA,
income_treatment = 6,
turnover_in_meur = `Xetra Order Book Turnover in MEUR_`,
aum_in_meur = `AuM_in MEUR`) %>%
filter(isin != "ISIN") %>%
mutate(turnover_in_meur = as.numeric(turnover_in_meur),
aum_in_meur = as.numeric(aum_in_meur))
xetra_df_sum <-xetra_df %>%
group_by(etf_name, isin) %>%
summarize(turnover = sum(turnover_in_meur))
View(xetra_df_sum)
xetra_df_sum <-xetra_df %>%
group_by(etf_name, isin) %>%
summarize(turnover_in_meur = sum(turnover_in_meur)) %>%
arrange(-turnover_in_meur)
xetra_df_sum <-xetra_df %>%
group_by(etf_name) %>% #, isin
summarize(turnover_in_meur = sum(turnover_in_meur)) %>%
arrange(-turnover_in_meur)
#++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
# Load R libraries and themes ----
#++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
cat("\014") # Clear your console
rm(list = ls()) # Clear your environment
# Load in header file
setwd("/Users/jan/blog/jantau/content/post/2021-12-22-recap-nasdaq-100")
