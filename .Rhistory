) +
geom_hline(yintercept = 16.666667,
linetype = "dashed",
color = "dimgrey") +
scale_x_discrete(limits=rev) +
geom_label(aes(
x = period,
y = percentage,
label = paste0(round(percentage, 1), " %")
),
color = "black",
size = 3) +
annotate(
geom = "curve",
x = 5,
y = 25,
xend = 5.9,
yend = 16.666667,
curvature = -.2,
arrow = arrow(length = unit(2, "mm")),
col = "dimgrey"
) +
annotate(
geom = "label",
x = 4.9,
y = 25,
label = "In jeder 5-Jahres-Periode wurde\ndieselbe Summe investiert, was jeweils\n16,7 % der Gesamtinvestition entspricht.",
hjust = "right",
vjust = "bottom",
col = "dimgrey",
fill = "dimgrey",
alpha = 0.6,
size = 3.5
)
dax_period_percentage %>%
filter(date == "2020-12-30") %>%
mutate(percentage = percentage * 100) %>%
ggplot(aes(x = period, y = percentage)) +
geom_col(fill = got(6, option = "Daenerys", direction = -1)) +
theme_jantau +
labs(title = "Endwerte",
subtitle = "nach 5-Jahres-Perioden",
caption = "Datenanalyse u. Visualisierung: jantau.com | Daten: finance.yahoo.com") +
theme(axis.title.x = element_blank(),
axis.title.y = element_blank()) +
scale_y_continuous(
sec.axis = sec_axis(~ ., labels = dollar_format(suffix = " %",
prefix = "")),
labels = dollar_format(suffix = " %",
prefix = "")
) +
geom_hline(yintercept = 16.666667,
linetype = "dashed",
color = "dimgrey") +
scale_x_discrete(limits=rev) +
geom_label(aes(
x = period,
y = percentage,
label = paste0(round(percentage, 1), " %")
),
color = "black",
size = 3) +
annotate(
geom = "curve",
x = 5,
y = 25,
xend = 5.9,
yend = 16.666667,
curvature = -.2,
arrow = arrow(length = unit(2, "mm")),
col = "dimgrey"
) +
annotate(
geom = "label",
x = 4.9,
y = 25,
label = "In jeder 5-Jahres-Periode wurde\ndieselbe Summe investiert, was jeweils\n16,7 % der Gesamtinvestition entspricht.",
hjust = "right",
vjust = "bottom",
col = "dimgrey",
fill = "dimgrey",
alpha = 0.2,
size = 3.5
)
dax_period_percentage %>%
filter(date == "2020-12-30") %>%
mutate(percentage = percentage * 100) %>%
ggplot(aes(x = period, y = percentage)) +
geom_col(fill = got(6, option = "Daenerys", direction = -1)) +
theme_jantau +
labs(title = "Endwerte",
subtitle = "nach 5-Jahres-Perioden",
caption = "Datenanalyse u. Visualisierung: jantau.com | Daten: finance.yahoo.com") +
theme(axis.title.x = element_blank(),
axis.title.y = element_blank()) +
scale_y_continuous(
sec.axis = sec_axis(~ ., labels = dollar_format(suffix = " %",
prefix = "")),
labels = dollar_format(suffix = " %",
prefix = "")
) +
geom_hline(yintercept = 16.666667,
linetype = "dashed",
color = "dimgrey") +
scale_x_discrete(limits=rev) +
geom_label(aes(
x = period,
y = percentage,
label = paste0(round(percentage, 1), " %")
),
color = "black",
size = 3) +
annotate(
geom = "curve",
x = 5,
y = 25,
xend = 5.9,
yend = 16.666667,
curvature = -.2,
arrow = arrow(length = unit(2, "mm")),
col = "dimgrey"
) +
annotate(
geom = "label",
x = 4.9,
y = 25,
label = "In jeder 5-Jahres-Periode wurde\ndieselbe Summe investiert, was jeweils\n16,7 % der Gesamtinvestition entspricht.",
hjust = "right",
vjust = "bottom",
col = "dimgrey",
fill = "dimgrey",
alpha = 0.1,
size = 3.5
)
ggsave("endwerte.png", scale = .75)
plot_best_qrt_w_year <- index_year %>%
filter(symbol == "^SP500TR") %>%
filter(rank == 1) %>%
mutate(year = as.character(year)) %>%
ggplot(aes(x = qrt, fill = year)) +
geom_bar() + #position = "stack" #stat = "identity"
scale_x_discrete(drop = FALSE) +
theme_jantau +
geom_text(aes(label= year),stat="count",position=position_stack(0.5)) +
theme(legend.position = "none") +
labs(
title = "Das beste Quartal zum Investieren",
subtitle = "in den S&P 500 TR (1990 bis 2020)",
caption = "Datenanalyse u. Visualisierung: jantau.com | Daten: finance.yahoo.com",
y = "Anzahl Jahre"
) +
theme(axis.title.x = element_blank()) +
annotate(
geom = "curve",
x = 1.8,
y = 12,
xend = 1.2,
yend = 13,
curvature = -.4,
arrow = arrow(length = unit(2, "mm")),
col = pal[2]
) +
annotate(
geom = "curve",
x = 1.8,
y = 12,
xend = 1.2,
yend = 3,
curvature = -.4,
arrow = arrow(length = unit(2, "mm")),
col = pal[2]
) +
annotate(
geom = "text",
x = 1.9,
y = 12,
label = "In den Bullenjahren der\n1990er und 2010er fiel der\nbeste Kurs zum Investieren\nhäufig in das 1. Quartal.",
hjust = "left",
col = pal[2],
size = 3.5
)
plot_best_qrt_w_year
plot_best_qrt_w_year <- index_year %>%
filter(symbol == "^SP500TR") %>%
filter(rank == 1) %>%
mutate(year = as.character(year)) %>%
ggplot(aes(x = qrt, fill = year)) +
geom_bar() + #position = "stack" #stat = "identity"
scale_x_discrete(drop = FALSE) +
theme_jantau +
geom_text(aes(label= year),stat="count",position=position_stack(0.5)) +
theme(legend.position = "none") +
labs(
title = "Das beste Quartal zum Investieren",
subtitle = "in den S&P 500 TR (1990 bis 2020)",
caption = "Datenanalyse u. Visualisierung: jantau.com | Daten: finance.yahoo.com",
y = "Anzahl Jahre"
) +
theme(axis.title.x = element_blank()) +
annotate(
geom = "curve",
x = 1.8,
y = 12,
xend = 1.2,
yend = 13,
curvature = -.4,
arrow = arrow(length = unit(2, "mm")),
col = pal[2]
) +
annotate(
geom = "curve",
x = 1.8,
y = 12,
xend = 1.2,
yend = 3,
curvature = -.4,
arrow = arrow(length = unit(2, "mm")),
col = pal[2]
) +
annotate(
geom = "text",
x = 1.9,
y = 12,
label = "In den Bullenjahren der\n1990er und 2010er fiel der\nbeste Kurs zum Investieren\nhäufig in das 1. Quartal.",
hjust = "left",
col = pal[2],
size = 3.5
)
plot_best_qrt_w_year
plot_best_qrt_w_year <- index_year %>%
filter(symbol == "^SP500TR") %>%
filter(rank == 1) %>%
mutate(year = as.character(year)) %>%
ggplot(aes(x = qrt, fill = year)) +
geom_bar() + #position = "stack" #stat = "identity"
scale_fill_got_d(option = "Daenerys", direction = -1) +
scale_x_discrete(drop = FALSE) +
theme_jantau +
geom_text(aes(label= year),stat="count",position=position_stack(0.5)) +
theme(legend.position = "none") +
labs(
title = "Das beste Quartal zum Investieren",
subtitle = "in den S&P 500 TR (1990 bis 2020)",
caption = "Datenanalyse u. Visualisierung: jantau.com | Daten: finance.yahoo.com",
y = "Anzahl Jahre"
) +
theme(axis.title.x = element_blank()) +
annotate(
geom = "curve",
x = 1.8,
y = 12,
xend = 1.2,
yend = 13,
curvature = -.4,
arrow = arrow(length = unit(2, "mm")),
col = pal[2]
) +
annotate(
geom = "curve",
x = 1.8,
y = 12,
xend = 1.2,
yend = 3,
curvature = -.4,
arrow = arrow(length = unit(2, "mm")),
col = pal[2]
) +
annotate(
geom = "text",
x = 1.9,
y = 12,
label = "In den Bullenjahren der\n1990er und 2010er fiel der\nbeste Kurs zum Investieren\nhäufig in das 1. Quartal.",
hjust = "left",
col = pal[2],
size = 3.5
)
plot_best_qrt_w_year
plot_best_qrt_w_year <- index_year %>%
filter(symbol == "^SP500TR") %>%
filter(rank == 1) %>%
mutate(year = as.character(year)) %>%
ggplot(aes(x = qrt, fill = year)) +
geom_bar() + #position = "stack" #stat = "identity"
scale_fill_got_d(option = "Daenerys", direction = 1) +
scale_x_discrete(drop = FALSE) +
theme_jantau +
geom_text(aes(label= year),stat="count",position=position_stack(0.5)) +
theme(legend.position = "none") +
labs(
title = "Das beste Quartal zum Investieren",
subtitle = "in den S&P 500 TR (1990 bis 2020)",
caption = "Datenanalyse u. Visualisierung: jantau.com | Daten: finance.yahoo.com",
y = "Anzahl Jahre"
) +
theme(axis.title.x = element_blank()) +
annotate(
geom = "curve",
x = 1.8,
y = 12,
xend = 1.2,
yend = 13,
curvature = -.4,
arrow = arrow(length = unit(2, "mm")),
col = pal[2]
) +
annotate(
geom = "curve",
x = 1.8,
y = 12,
xend = 1.2,
yend = 3,
curvature = -.4,
arrow = arrow(length = unit(2, "mm")),
col = pal[2]
) +
annotate(
geom = "text",
x = 1.9,
y = 12,
label = "In den Bullenjahren der\n1990er und 2010er fiel der\nbeste Kurs zum Investieren\nhäufig in das 1. Quartal.",
hjust = "left",
col = pal[2],
size = 3.5
)
plot_best_qrt_w_year
pal <- got(3, option = "Daenerys", direction = 1)
plot_best_qrt_w_year <- index_year %>%
filter(symbol == "^SP500TR") %>%
filter(rank == 1) %>%
mutate(year = as.character(year)) %>%
ggplot(aes(x = qrt, fill = year)) +
geom_bar() + #position = "stack" #stat = "identity"
scale_fill_got_d(option = "Daenerys", direction = 1) +
scale_x_discrete(drop = FALSE) +
theme_jantau +
geom_text(aes(label= year),stat="count",position=position_stack(0.5)) +
theme(legend.position = "none") +
labs(
title = "Das beste Quartal zum Investieren",
subtitle = "in den S&P 500 TR (1990 bis 2020)",
caption = "Datenanalyse u. Visualisierung: jantau.com | Daten: finance.yahoo.com",
y = "Anzahl Jahre"
) +
theme(axis.title.x = element_blank()) +
annotate(
geom = "curve",
x = 1.8,
y = 12,
xend = 1.2,
yend = 13,
curvature = -.4,
arrow = arrow(length = unit(2, "mm")),
col = pal[2]
) +
annotate(
geom = "curve",
x = 1.8,
y = 12,
xend = 1.2,
yend = 3,
curvature = -.4,
arrow = arrow(length = unit(2, "mm")),
col = pal[2]
) +
annotate(
geom = "text",
x = 1.9,
y = 12,
label = "In den Bullenjahren der\n1990er und 2010er fiel der\nbeste Kurs zum Investieren\nhäufig in das 1. Quartal.",
hjust = "left",
col = pal[2],
size = 3.5
)
plot_best_qrt_w_year
plot_worst_qrt_w_year <- index_year %>%
filter(symbol == "^SP500TR") %>%
filter(rank == max(rank)) %>%
mutate(year = as.character(year)) %>%
ggplot(aes(x = qrt, fill = year)) +
geom_bar() + #position = "stack" #stat = "identity"
scale_fill_got_d(option = "Daenerys", direction = 1) +
scale_x_discrete(drop = FALSE) +
theme_jantau +
geom_text(aes(label = year), stat = "count", position = position_stack(0.5)) +
theme(legend.position = "none") +
labs(
title = "Das beste Quartal zum Verkaufen",
subtitle = "vom S&P 500 TR (1990 bis 2020)",
caption = "Datenanalyse u. Visualisierung: jantau.com | Daten: finance.yahoo.com",
y = "Anzahl Jahre"
) +
theme(axis.title.x = element_blank()) +
annotate(
geom = "curve",
x = 1.5,
y = 11.5,
xend = 1.2,
yend = 2,
curvature = -.4,
arrow = arrow(length = unit(2, "mm")),
col = pal[2]
) +
annotate(
geom = "text",
x = 1.5,
y = 12,
label = "Lediglich in den Crash-Jahren\n2001, 2002 und 2008 fiel der\nbeste Kurs zum Verkaufen\nin das 1. Quartal.",
hjust = "middle",
vjust = "bottom",
col = pal[2],
size = 3.5
)
plot_worst_qrt_w_year
blogdown::new_post("Sektorenrotation", ext = ".md")
getwd()
setwd("/Users/jan/blog/jantau/")
blogdown::new_post("Sektorenrotation", ext = ".md")
getwd()
sector_etfs <- as.data.frame(
ticker <- c("FENY", "FMAT", "FIDU"),
name <- c("Fidelity MSCI Energy Index ETF", "Fidelity MSCI Materials Index ETF", "Fidelity MSCI Industrials Index ETF")
)
sector_etfs <- data.frame(
ticker <- c("FENY", "FMAT", "FIDU"),
name <- c("Fidelity MSCI Energy Index ETF", "Fidelity MSCI Materials Index ETF", "Fidelity MSCI Industrials Index ETF")
)
View(sector_etfs)
sector_etfs <- data.frame(
ticker = c("FENY", "FMAT", "FIDU"),
name = c(
"Fidelity MSCI Energy Index ETF",
"Fidelity MSCI Materials Index ETF",
"Fidelity MSCI Industrials Index ETF"
)
)
View(sector_etfs)
sector_etfs <- data.frame(
ticker = c("FENY", "FMAT", "FIDU", "FDIS", "FSTA", "FHLC"),
name = c(
"Fidelity MSCI Energy Index ETF",
"Fidelity MSCI Materials Index ETF",
"Fidelity MSCI Industrials Index ETF",
"Fidelity MSCI Consumer Discretionary Index ETF",
"Fidelity MSCI Consumer Staples Index ETF",
"Fidelity MSCI Health Care Index ETF"
)
)
View(plot)
sector_etfs <- data.frame(
ticker = c("FENY", "FMAT", "FIDU", "FDIS", "FSTA", "FHLC", "FNCL", "FTEC", "FCOM", "FUTY", "FREL"),
name = c(
"Fidelity MSCI Energy Index ETF",
"Fidelity MSCI Materials Index ETF",
"Fidelity MSCI Industrials Index ETF",
"Fidelity MSCI Consumer Discretionary Index ETF",
"Fidelity MSCI Consumer Staples Index ETF",
"Fidelity MSCI Health Care Index ETF",
"Fidelity MSCI Financials Index ETF",
"Fidelity MSCI Information Technology Index ETF",
"Fidelity MSCI Communication Services Index ETF",
"Fidelity MSCI Utilities Index ETF",
"Fidelity MSCI Real Estate Index ETF"
)
)
sector_etfs_data <- tq_get(sector_etfs$ticker,
get  = "stock.prices",
from = "2020-01-01",
to = "2021-05-25")
unique(sector_etfs_data$symbol)
length(unique(sector_etfs_data$symbol))
View(sector_etfs_data)
sector_etfs_data <- sector_etfs_data %>%
select(1, 2, 7, 8) %>%
inner_join(sector_etfs, by = ticker)
sector_etfs_data <- sector_etfs_data %>%
select(1, 2, 7, 8) %>%
inner_join(sector_etfs)
sector_etfs_data <- sector_etfs_data %>%
select(1, 2, 7, 8) %>%
inner_join(sector_etfs, by = c("symbol" = "ticker"))
sector_etfs_data <- tq_get(sector_etfs$ticker,
get  = "stock.prices",
from = "2020-01-01",
to = "2021-05-25")
sector_etfs_data_join <- sector_etfs_data %>%
select(1, 2, 7, 8) %>%
inner_join(sector_etfs, by = c("symbol" = "ticker"))
sector_etfs_data_join <- sector_etfs_data %>%
select(1, 2, 7, 8) %>%
inner_join(sector_etfs, by = c("symbol" = "ticker")) %>%
relocate(name, .after = symbol)
View(sector_etfs_data_join)
sector_etfs_data_join %>%
ggplot(aes(x = date, y = adjusted, group = name)) +
geom_line()
sector_etfs_data_join %>%
ggplot(aes(x = date, y = adjusted, color = name)) +
geom_line()
sector_etfs_data_join %>%
ggplot(aes(x = date, y = adjusted, color = name)) +
geom_line() +
theme_jantau
sector_etfs_data_join %>%
ggplot(aes(x = date, y = adjusted, color = name)) +
geom_line() +
geom_smooth(method = lm) +
theme_jantau
sector_etfs_data_join %>%
ggplot(aes(x = date, y = adjusted, color = name)) +
# geom_line() +
geom_smooth(method = lm) +
theme_jantau
